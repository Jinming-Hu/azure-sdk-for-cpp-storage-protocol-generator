service_name: Blobs
output_hpp: azure/storage/blobs/protocol/blob_rest_client.hpp
output_cpp: blob_rest_client.cpp

Constants:
  ApiVersion: &ApiVersion "2020-02-10"

response_request_id_package: &RESPONSE_REQUEST_ID_PACKAGE
  - [get_header_code, "x-ms-request-id", RequestId]

request_version_timeout_package: &REQUEST_VERSION_TIMEOUT_PACKAGE
  - [add_header_code, "x-ms-version", *ApiVersion]
  - [add_query_code, "timeout", Timeout]

request_encryption_package: &REQUEST_ENCRYPTION_HEADER_PACKAGE
  - [add_header_code, "x-ms-encryption-key", EncryptionKey]
  - [add_header_code, "x-ms-encryption-key-sha256", EncryptionKeySha256]
  - [add_header_code, "x-ms-encryption-algorithm", EncryptionAlgorithm]
  - [add_header_code, "x-ms-encryption-scope", EncryptionScope, ignorable]

response_encryption_package: &RESPONSE_ENCRYPTION_HEADER_PACKAGE
  - [get_header_code, "x-ms-server-encrypted", IsServerEncrypted]
  - [get_header_code, "x-ms-encryption-key-sha256", EncryptionKeySha256]
  - [get_header_code, "x-ms-encryption-scope", EncryptionScope]

response_request_encryption_package: &RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE
  - [get_header_code, "x-ms-request-server-encrypted", IsServerEncrypted]
  - [get_header_code, "x-ms-encryption-key-sha256", EncryptionKeySha256]
  - [get_header_code, "x-ms-encryption-scope", EncryptionScope]

response_etag_last_modified_package: &RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
  - [get_header_code, "ETag", ETag]
  - [get_header_code, "Last-Modified", LastModified]

request_checksum_package: &REQUEST_CHECKSUM_HEADER_PACKAGE
  - [add_content_hash_code, TransactionalContentHash]

request_source_checksum_package: &REQUEST_SOURCE_CHECKSUM_HEADER_PACKAGE
  - [add_source_content_hash_code, TransactionalContentHash]

response_checksum_package: &RESPONSE_CHECKSUM_HEADER_PACKAGE
  - [get_content_hash_code, TransactionalContentHash]

request_mime_package: &REQUEST_MIME_HEADER_PACKAGE
  - [add_header_code, "x-ms-blob-content-type", HttpHeaders.ContentType, optional]
  - [add_header_code, "x-ms-blob-content-encoding", HttpHeaders.ContentEncoding, optional]
  - [add_header_code, "x-ms-blob-content-language", HttpHeaders.ContentLanguage, optional]
  - [add_header_code, "x-ms-blob-cache-control", HttpHeaders.CacheControl, optional]
  - [add_header_code, "x-ms-blob-content-md5", HttpHeaders.ContentHash.Value, optional]
  - [add_header_code, "x-ms-blob-content-disposition", HttpHeaders.ContentDisposition, optional]

response_mime_package: &RESPONSE_MIME_HEADER_PACKAGE
  - [get_header_code, "Content-Type", HttpHeaders.ContentType, optional]
  - [get_header_code, "Content-Encoding", HttpHeaders.ContentEncoding, optional]
  - [get_header_code, "Content-Language", HttpHeaders.ContentLanguage, optional]
  - [get_header_code, "Cache-Control", HttpHeaders.CacheControl, optional]
  - [get_header_code, "Content-MD5", HttpHeaders.ContentHash.Value, optional]
  - [get_header_code, "x-ms-blob-content-md5", HttpHeaders.ContentHash.Value, optional]
  - [get_header_code, "Content-Disposition", HttpHeaders.ContentDisposition, optional]

response_lease_package: &RESPONSE_LEASE_HEADER_PACKAGE
  - [get_header_code, "x-ms-lease-status", LeaseStatus]
  - [get_header_code, "x-ms-lease-state", LeaseState]
  - [get_header_code, "x-ms-lease-duration", LeaseDuration]

request_conditional_headers_package: &REQUEST_CONDITIONAL_HEADER_PACKAGE
  - [add_header_code, "If-Modified-Since", IfModifiedSince]
  - [add_header_code, "If-Unmodified-Since", IfUnmodifiedSince, ignorable]
  - [add_header_code, "If-Match", IfMatch, ignorable, optional]
  - [add_header_code, "If-None-Match", IfNoneMatch, ignorable, optional]
  - [add_header_code, "x-ms-if-tags", IfTags, ignorable]

request_source_conditional_headers_package: &REQUEST_SOURCE_CONDITIONAL_HEADER_PACKAGE
  - [add_header_code, "x-ms-source-if-modified-since", SourceIfModifiedSince]
  - [add_header_code, "x-ms-source-if-unmodified-since", SourceIfUnmodifiedSince]
  - [add_header_code, "x-ms-source-if-match", SourceIfMatch, optional]
  - [add_header_code, "x-ms-source-if-none-match", SourceIfNoneMatch, optional]

Services:
  - Service:
    - ListBlobContainersSinglePage:
        http_method: Get
        http_status_code: 200
        return_type:
          ListBlobContainersSinglePageResult:
            - BasicResponse: inline
            - ServiceEndpoint: std::string
            - Prefix: std::string
            - ContinuationToken: std::string, nullable
            - Items: std::vector<BlobContainerItem>
            - from_xml: [
              [attribute, EnumerationResults, ServiceEndpoint, ServiceEndpoint],
              [text, EnumerationResults.Prefix, Prefix],
              [text, EnumerationResults.NextMarker, ContinuationToken],
              [start_tag, EnumerationResults.Containers.Container, Items],
            ]
        options:
          - BasicRequestOptions: inline
          - Prefix: std::string, nullable
          - ContinuationToken: std::string, nullable
          - MaxResults: int32_t, nullable
          - Include: ListBlobContainersIncludeFlags = ListBlobContainersIncludeFlags::None
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "list"]
          - [add_query_code, "prefix", Prefix]
          - [add_query_code, "marker", ContinuationToken]
          - [add_query_code, "maxresults", MaxResults]
          - [add_query_code, "include", Include, optional]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]

    - GetUserDelegationKey:
        http_method: Post
        http_status_code: 200
        return_type:
          GetUserDelegationKeyResult:
            - BasicResponse: inline
            - Key: UserDelegationKey
            - from_xml: [
              [start_tag, UserDelegationKey, Key]
            ]
        options:
          - BasicRequestOptions: inline
          - StartsOn: Azure::Core::DateTime(ISO8601t)
          - ExpiresOn: Azure::Core::DateTime(ISO8601t)
          - to_xml: [
            [tag, KeyInfo.Start, StartsOn],
            [tag, KeyInfo.Expiry, ExpiresOn],
          ]
        request_action:
          - [add_xml_body_code]
          - [add_query_code, "restype", "service"]
          - [add_query_code, "comp", "userdelegationkey"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]

    - GetProperties:
        http_method: Get
        http_status_code: 200
        return_type:
          GetServicePropertiesResult:
            - BasicResponse: inline
            - BlobServiceProperties: inline
        options:
          - BasicRequestOptions: inline
        request_action:
          - [add_query_code, "restype", "service"]
          - [add_query_code, "comp", "properties"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]

    - SetProperties:
        http_method: Put
        http_status_code: 202
        return_type:
          SetServicePropertiesResult:
            - BasicResponse: inline
        options:
          - BasicRequestOptions: inline
          - Properties: BlobServiceProperties
          - to_xml: [
            [tag, StorageServiceProperties, Properties],
          ]
        request_action:
          - [add_xml_body_code]
          - [add_query_code, "restype", "service"]
          - [add_query_code, "comp", "properties"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - GetAccountInfo:
        http_method: Head
        http_status_code: 200
        return_type:
          GetAccountInfoResult:
            - BasicResponse: inline
            - SkuName: SkuName
            - AccountKind: AccountKind
            - IsHierarchicalNamespaceEnabled: bool = false
        options:
            - BasicRequestOptions: inline
        request_action:
          - [add_query_code, "restype", "account"]
          - [add_query_code, "comp", "properties"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_header_code, "x-ms-sku-name", SkuName]
          - [get_header_code, "x-ms-account-kind", AccountKind]
          - [get_header_code, "x-ms-is-hns-enabled", IsHierarchicalNamespaceEnabled]

    - GetStatistics:
        http_method: Get
        http_status_code: 200
        return_type:
          GetServiceStatisticsResult:
            - BasicResponse: inline
            - GeoReplication: BlobGeoReplication
            - from_xml: [
              [start_tag, StorageServiceStats.GeoReplication, GeoReplication]
            ]
        options:
          - BasicRequestOptions: inline
        request_action:
          - [add_query_code, "restype", "service"]
          - [add_query_code, "comp", "stats"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]

    - FindBlobsByTagsSinglePage:
        http_method: Get
        http_status_code: 200
        return_type:
          FindBlobsByTagsSinglePageResult:
            - BasicResponse: inline
            - ServiceEndpoint: std::string
            - ContinuationToken: std::string, nullable
            - Items: std::vector<FilterBlobItem>
            - from_xml: [
              [attribute, EnumerationResults, ServiceEndpoint, ServiceEndpoint],
              [text, EnumerationResults.NextMarker, ContinuationToken],
              [start_tag, EnumerationResults.Blobs.Blob, Items],
            ]
        options:
          - BasicRequestOptions: inline
          - Where: std::string
          - ContinuationToken: std::string, nullable
          - MaxResults: int32_t, nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "blobs"]
          - [add_query_code, "where", Where]
          - [add_query_code, "marker", ContinuationToken]
          - [add_query_code, "maxresults", MaxResults]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]


  - BlobContainer:
    - Create:
        http_method: Put
        http_status_code: 201
        return_type:
          CreateBlobContainerResult:
            - BasicResponse: inline
            - Created: bool = true
            - BlobContainerInfo: inline
        options:
          - BasicRequestOptions: inline
          - AccessType: PublicAccessType = PublicAccessType::None
          - Metadata: Metadata
          - DefaultEncryptionScope: std::string, nullable
          - PreventEncryptionScopeOverride: bool, nullable
        request_action:
          - [add_query_code, "restype", "container"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-blob-public-access", AccessType, optional]
          - [add_header_code, "x-ms-default-encryption-scope", DefaultEncryptionScope]
          - [add_header_code, "x-ms-deny-encryption-scope-override", PreventEncryptionScopeOverride]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE

    - Delete:
        http_method: Delete
        http_status_code: 202
        return_type:
          DeleteBlobContainerResult:
            - BasicResponse: inline
            - Deleted: bool = true
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string, nullable
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
        request_action:
          - [add_query_code, "restype", "container"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - Undelete:
        http_method: Put
        http_status_code: 201
        return_type:
          UndeleteBlobContainerResult:
            - BasicResponse: inline
        options:
          - BasicRequestOptions: inline
          - DeletedBlobContainerName: std::string
          - DeletedBlobContainerVersion: std::string
        request_action:
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "undelete"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-deleted-container-name", DeletedBlobContainerName]
          - [add_header_code, "x-ms-deleted-container-version", DeletedBlobContainerVersion]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - GetProperties:
        http_method: Head
        http_status_code: 200
        return_type:
          GetBlobContainerPropertiesResult:
            - BasicResponse: inline
            - BlobContainerItemWithoutName: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string, nullable
        request_action:
          - [add_query_code, "restype", "container"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_metadata_code, "x-ms-meta-", Metadata, optional]
          - [get_header_code, "x-ms-blob-public-access", AccessType, optional]
          - [get_header_code, "x-ms-has-immutability-policy", HasImmutabilityPolicy]
          - [get_header_code, "x-ms-has-legal-hold", HasLegalHold]
          - *RESPONSE_LEASE_HEADER_PACKAGE
          - [get_header_code, "x-ms-default-encryption-scope", DefaultEncryptionScope]
          - [get_header_code, "x-ms-deny-encryption-scope-override", PreventEncryptionScopeOverride]

    - SetMetadata:
        http_method: Put
        http_status_code: 200
        return_type:
          SetBlobContainerMetadataResult:
            - BasicResponse: inline
            - BlobContainerInfo: inline
        options:
          - BasicRequestOptions: inline
          - Metadata: Metadata
          - LeaseId: std::string, nullable
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
        request_action:
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "metadata"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE

    - ListBlobsSinglePage:
        http_method: Get
        http_status_code: 200
        return_type:
          ListBlobsSinglePageResult:
            - BasicResponse: inline
            - ServiceEndpoint: std::string
            - BlobContainerName: std::string
            - Prefix: std::string
            - ContinuationToken: std::string, nullable
            - Items: std::vector<BlobItem>
            - from_xml: [
              [attribute, EnumerationResults, ServiceEndpoint, ServiceEndpoint],
              [attribute, EnumerationResults, ContainerName, BlobContainerName],
              [text, EnumerationResults.Prefix, Prefix],
              [text, EnumerationResults.NextMarker, ContinuationToken],
              [start_tag, EnumerationResults.Blobs.Blob, Items],
            ]
        options:
          - BasicRequestOptions: inline
          - Prefix: std::string, nullable
          - ContinuationToken: std::string, nullable
          - MaxResults: int32_t, nullable
          - Include: ListBlobsIncludeFlags = ListBlobsIncludeFlags::None
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "list"]
          - [add_query_code, "prefix", Prefix]
          - [add_query_code, "marker", ContinuationToken]
          - [add_query_code, "maxresults", MaxResults]
          - [add_query_code, "include", Include, optional]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]

    - ListBlobsByHierarchySinglePage:
        http_method: Get
        http_status_code: 200
        return_type:
          ListBlobsByHierarchySinglePageResult:
            - BasicResponse: inline
            - ServiceEndpoint: std::string
            - BlobContainerName: std::string
            - Prefix: std::string
            - Delimiter: std::string
            - ContinuationToken: std::string, nullable
            - Items: std::vector<BlobItem>
            - BlobPrefixes: std::vector<std::string>
            - from_xml: [
              [attribute, EnumerationResults, ServiceEndpoint, ServiceEndpoint],
              [attribute, EnumerationResults, ContainerName, BlobContainerName],
              [text, EnumerationResults.Prefix, Prefix],
              [text, EnumerationResults.Delimiter, Delimiter],
              [text, EnumerationResults.NextMarker, ContinuationToken],
              [start_tag, EnumerationResults.Blobs.Blob, Items],
              [text, EnumerationResults.Blobs.BlobPrefix.Name, BlobPrefixes]
            ]
        options:
          - BasicRequestOptions: inline
          - Prefix: std::string, nullable
          - Delimiter: std::string, nullable
          - ContinuationToken: std::string, nullable
          - MaxResults: int32_t, nullable
          - Include: ListBlobsIncludeFlags = ListBlobsIncludeFlags::None
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "list"]
          - [add_query_code, "prefix", Prefix]
          - [add_query_code, "delimiter", Delimiter]
          - [add_query_code, "marker", ContinuationToken]
          - [add_query_code, "maxresults", MaxResults]
          - [add_query_code, "include", Include, optional]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]

    - GetAccessPolicy:
        http_method: Get
        http_status_code: 200
        return_type:
          GetBlobContainerAccessPolicyResult:
            - BasicResponse: inline
            - BlobContainerAccessPolicy: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string, nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "acl"]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-public-access", AccessType, optional]
          - [get_xml_body_code]

    - SetAccessPolicy:
        http_method: Put
        http_status_code: 200
        return_type:
          SetBlobContainerAccessPolicyResult:
            - BasicResponse: inline
            - BlobContainerInfo: inline
        options:
          - BasicRequestOptions: inline
          - AccessType: PublicAccessType = PublicAccessType::None
          - LeaseId: std::string, nullable
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - SignedIdentifiers: std::vector<BlobSignedIdentifier>
          - to_xml: [
              [tag, SignedIdentifiers, SignedIdentifiers],
            ]
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "acl"]
          - [add_header_code, "x-ms-blob-public-access", AccessType, optional]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
          - [add_xml_body_code]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE

    - AcquireLease:
        http_method: Put
        http_status_code: 201
        return_type:
          AcquireBlobContainerLeaseResultInternal:
            - BasicResponse: inline
            - BlobLease: inline
        options:
          - BasicRequestOptions: inline
          - LeaseDuration: std::chrono::seconds
          - ProposedLeaseId: std::string, nullable
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "acquire"]
          - [add_header_code, "x-ms-lease-duration", LeaseDuration]
          - [add_header_code, "x-ms-proposed-lease-id", ProposedLeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-id", LeaseId]

    - RenewLease:
        http_method: Put
        http_status_code: 200
        return_type:
          RenewBlobContainerLeaseResultInternal:
            - BasicResponse: inline
            - BlobLease: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "renew"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-id", LeaseId]

    - ChangeLease:
        http_method: Put
        http_status_code: 200
        return_type:
          ChangeBlobContainerLeaseResultInternal:
            - BasicResponse: inline
            - BlobLease: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string
          - ProposedLeaseId: std::string
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "change"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-proposed-lease-id", ProposedLeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-id", LeaseId]

    - ReleaseLease:
        http_method: Put
        http_status_code: 200
        return_type:
          ReleaseBlobContainerLeaseResultInternal:
            - BasicResponse: inline
            - BlobContainerInfo: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "release"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE

    - BreakLease:
        http_method: Put
        http_status_code: 202
        return_type:
          BreakBlobContainerLeaseResultInternal:
            - BasicResponse: inline
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - LeaseTime: int32_t = 0
        options:
          - BasicRequestOptions: inline
          - BreakPeriod: std::chrono::seconds, nullable
          - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
          - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "restype", "container"]
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "break"]
          - [add_header_code, "x-ms-lease-break-period", BreakPeriod]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-time", LeaseTime]


  - Blob:
    - Download:
        http_method: Get
        http_status_code: [200, 206]
        return_type:
          DownloadBlobResult:
            - BodiedResponse: inline
            - ContentRange: Azure::Core::Http::Range
            - BlobSize: int64_t = 0
            - BlobType: BlobType
            - TransactionalContentHash: ContentHash, nullable  # hash for the downloaded range
            - Details: DownloadBlobDetails
        options:
          - BasicRequestOptions: inline
          - Range: Azure::Core::Http::Range, nullable
          - RangeHashAlgorithm: HashAlgorithm, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - LeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_range_header_code, "x-ms-range", Range]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_hash_algorithm_code, RangeHashAlgorithm]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - [get_body_code, BodyStream]
          - [get_header_code, "x-ms-blob-type", BlobType]
          - [get_content_range_code, "Content-Range", ContentRange]
          - [get_content_range_code, "Content-Range", BlobSize]
          - [get_header_code, "ETag", Details.ETag]
          - [get_header_code, "Last-Modified", Details.LastModified]
          - [get_header_code, "Content-Type", Details.HttpHeaders.ContentType, optional]
          - [get_header_code, "Content-Encoding", Details.HttpHeaders.ContentEncoding, optional]
          - [get_header_code, "Content-Language", Details.HttpHeaders.ContentLanguage, optional]
          - [get_header_code, "Cache-Control", Details.HttpHeaders.CacheControl, optional]
          - [get_header_code, "Content-MD5", Details.HttpHeaders.ContentHash.Value, optional]
          - [get_header_code, "x-ms-blob-content-md5", Details.HttpHeaders.ContentHash.Value, optional]
          - [get_header_code, "Content-Disposition", Details.HttpHeaders.ContentDisposition, optional]
          - [get_metadata_code, "x-ms-meta-", Details.Metadata, optional]
          - [get_header_code, "x-ms-server-encrypted", Details.IsServerEncrypted]
          - [get_header_code, "x-ms-encryption-key-sha256", Details.EncryptionKeySha256]
          - [get_header_code, "x-ms-encryption-scope", Details.EncryptionScope]
          - [get_header_code, "x-ms-lease-status", Details.LeaseStatus]
          - [get_header_code, "x-ms-lease-state", Details.LeaseState]
          - [get_header_code, "x-ms-lease-duration", Details.LeaseDuration]
          - [get_header_code, "x-ms-creation-time", Details.CreatedOn]
          - [get_header_code, "x-ms-expiry-time", Details.ExpiresOn]
          - [get_header_code, "x-ms-last-access-time", Details.LastAccessedOn]
          - [get_header_code, "x-ms-blob-sequence-number", Details.SequenceNumber]
          - [get_header_code, "x-ms-blob-committed-block-count", Details.CommittedBlockCount]
          - [get_header_code, "x-ms-blob-sealed", Details.IsSealed]
          - [get_header_code, "x-ms-or-policy-id", Details.ObjectReplicationDestinationPolicyId]
          - [get_or_code, "x-ms-or-", Details.ObjectReplicationSourceProperties]
          - [get_header_code, "x-ms-tag-count", Details.TagCount]
          - [get_header_code, "x-ms-copy-id", Details.CopyId]
          - [get_header_code, "x-ms-copy-source", Details.CopySource]
          - [get_header_code, "x-ms-copy-status", Details.CopyStatus]
          - [get_header_code, "x-ms-copy-status-description", Details.CopyStatusDescription]
          - [get_header_code, "x-ms-copy-progress", Details.CopyProgress]
          - [get_header_code, "x-ms-copy-completion-time", Details.CopyCompletedOn]
          - [get_header_code, "x-ms-version-id", Details.VersionId]
          - [get_header_code, "x-ms-is-current-version", Details.IsCurrentVersion]

    - Delete:
        separate_functions: true
        http_method: Delete
        http_status_code: 202
        return_type:
          DeleteBlobResult:
            - BasicResponse: inline
            - Deleted: bool = true
        options:
          - BasicRequestOptions: inline
          - DeleteSnapshots: DeleteSnapshotsOption, nullable
          - LeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-delete-snapshots", DeleteSnapshots]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - ScheduleDeletion:
        http_method: Put
        http_status_code: 200
        return_type:
          SetBlobExpiryResult:
            - BasicResponse: inline
        options:
          - BasicRequestOptions: inline
          - ExpiryOrigin: ScheduleBlobExpiryOriginType
          - ExpiryTime: std::string, nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "expiry"]
          - [add_header_code, "x-ms-expiry-option", ExpiryOrigin]
          - [add_header_code, "x-ms-expiry-time", ExpiryTime]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - Undelete:
        http_method: Put
        http_status_code: 200
        return_type:
          UndeleteBlobResult:
            - BasicResponse: inline
        options:
          - BasicRequestOptions: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "undelete"]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - GetProperties:
        http_method: Head
        http_status_code: 200
        return_type:
          GetBlobPropertiesResult:
            - BasicResponse: inline
            - BlobProperties: inline
        options:
          - BasicRequestOptions: inline
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - LeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-creation-time", CreatedOn]
          - [get_header_code, "x-ms-expiry-time", ExpiresOn]
          - [get_header_code, "x-ms-last-access-time", LastAccessedOn]
          - [get_metadata_code, "x-ms-meta-", Metadata, optional]
          - [get_header_code, "x-ms-blob-type", BlobType]
          - *RESPONSE_LEASE_HEADER_PACKAGE
          - [get_header_code, "Content-Length", BlobSize]
          - *RESPONSE_MIME_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-sequence-number", SequenceNumber]
          - [get_header_code, "x-ms-blob-committed-block-count", CommittedBlockCount]
          - [get_header_code, "x-ms-blob-sealed", IsSealed]
          - *RESPONSE_ENCRYPTION_HEADER_PACKAGE
          - [get_header_code, "x-ms-access-tier", Tier]
          - [get_header_code, "x-ms-access-tier-inferred", IsAccessTierInferred]
          - [get_header_code, "x-ms-archive-status", ArchiveStatus]
          - [get_header_code, "x-ms-rehydrate-priority", RehydratePriority]
          - [get_header_code, "x-ms-access-tier-change-time", AccessTierChangedOn]
          - [get_header_code, "x-ms-copy-id", CopyId]
          - [get_header_code, "x-ms-copy-source", CopySource]
          - [get_header_code, "x-ms-copy-status", CopyStatus]
          - [get_header_code, "x-ms-copy-status-description", CopyStatusDescription]
          - [get_header_code, "x-ms-incremental-copy", IsIncrementalCopy]
          - [get_header_code, "x-ms-copy-destination-snapshot", IncrementalCopyDestinationSnapshot]
          - [get_header_code, "x-ms-copy-progress", CopyProgress]
          - [get_header_code, "x-ms-copy-completion-time", CopyCompletedOn]
          - [get_header_code, "x-ms-or-policy-id", ObjectReplicationDestinationPolicyId]
          - [get_or_code, "x-ms-or-", ObjectReplicationSourceProperties]
          - [get_header_code, "x-ms-tag-count", TagCount]
          - [get_header_code, "x-ms-version-id", VersionId]
          - [get_header_code, "x-ms-is-current-version", IsCurrentVersion]

    - SetHttpHeaders:
        http_method: Put
        http_status_code: 200
        return_type:
          SetBlobHttpHeadersResult:
            - BasicResponse: inline
            - BlobInfo: inline
        options:
          - BasicRequestOptions: inline
          - HttpHeaders: BlobHttpHeaders
          - LeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "properties"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_MIME_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-sequence-number", SequenceNumber]

    - SetMetadata:
        http_method: Put
        http_status_code: 200
        return_type:
          SetBlobMetadataResult:
            - BasicResponse: inline
            - BlobInfo: inline
        options:
          - BasicRequestOptions: inline
          - Metadata: Metadata
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - LeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "metadata"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE

    - SetAccessTier:
        separate_functions: true
        http_method: Put
        http_status_code: [200, 202]
        return_type:
          SetBlobAccessTierResult:
            - BasicResponse: inline
        options:
          - BasicRequestOptions: inline
          - Tier: AccessTier
          - RehydratePriority: RehydratePriority, nullable
          - IfTags: std::string, nullable
        request_action:
          - [add_query_code, "comp", "tier"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-access-tier", Tier]
          - [add_header_code, "x-ms-rehydrate-priority", RehydratePriority]
          - [add_header_code, "x-ms-if-tags", IfTags]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - StartCopyFromUri:
        http_method: Put
        http_status_code: 202
        return_type:
          StartCopyBlobFromUriResultInternal:
            - BasicResponse: inline
            - BlobCopyInfo: inline
        options:
          - BasicRequestOptions: inline
          - Metadata: Metadata
          - SourceUri: std::string
          - LeaseId: std::string, nullable
          - SourceLeaseId: std::string, nullable
          - Tier: AccessTier, nullable
          - RehydratePriority: RehydratePriority, nullable
          - BlobRequestConditionalHeaders: inline
          - BlobRequestSourceConditionalHeaders: inline
          - SourceIfTags: std::string, nullable
          - ShouldSealDestination: bool, nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-copy-source", SourceUri]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-source-lease-id", SourceLeaseId]
          - [add_header_code, "x-ms-access-tier", Tier]
          - [add_header_code, "x-ms-rehydrate-priority", RehydratePriority]
          - [add_header_code, "x-ms-seal-blob", ShouldSealDestination]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
          - *REQUEST_SOURCE_CONDITIONAL_HEADER_PACKAGE
          - [add_header_code, "x-ms-source-if-tags", SourceIfTags]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-copy-id", CopyId]
          - [get_header_code, "x-ms-copy-status", CopyStatus]
          - [get_header_code, "x-ms-version-id", VersionId]

    - AbortCopyFromUri:
        http_method: Put
        http_status_code: 204
        return_type:
          AbortCopyBlobFromUriResult:
            - BasicResponse: inline
        options:
          - BasicRequestOptions: inline
          - CopyId: std::string
          - LeaseId: std::string, nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "copy"]
          - [add_query_code, "copyid", CopyId]
          - [add_header_code, "x-ms-copy-action", "abort"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - CreateSnapshot:
        http_method: Put
        http_status_code: 201
        return_type:
          CreateBlobSnapshotResult:
            - BasicResponse: inline
            - Snapshot: std::string
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - VersionId: std::string, nullable
            - BlobResponseEncryptionOptions: inline
        options:
          - BasicRequestOptions: inline
          - Metadata: Metadata
          - LeaseId: std::string, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "snapshot"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE
          - [get_header_code, "x-ms-snapshot", Snapshot]
          - [get_header_code, "x-ms-version-id", VersionId]

    - GetTags:
        http_method: Get
        http_status_code: 200
        return_type:
          GetBlobTagsResult:
            - BasicResponse: inline
            - Tags: std::map<std::string, std::string>
            - from_xml: [
              [start_tag, Tags.TagSet, Tags],
            ]
        options:
          - BasicRequestOptions: inline
          - IfTags: std::string, nullable
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "tags"]
          - [add_header_code, "x-ms-if-tags", IfTags]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]

    - SetTags:
        http_method: Put
        http_status_code: 204
        return_type:
          SetBlobTagsResult:
            - BasicResponse: inline
        options:
          - BasicRequestOptions: inline
          - Tags: std::map<std::string, std::string>
          - IfTags: std::string, nullable
          - to_xml: [
            [tag, Tags.TagSet, Tags],
          ]
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "tags"]
          - [add_header_code, "Content-Type", "application/xml; charset=UTF-8"]
          - [add_header_code, "x-ms-if-tags", IfTags]
          - [add_xml_body_code]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE

    - AcquireLease:
        http_method: Put
        http_status_code: 201
        return_type:
          AcquireBlobLeaseResultInternal:
            - BasicResponse: inline
            - BlobLease: inline
        options:
          - BasicRequestOptions: inline
          - LeaseDuration: std::chrono::seconds
          - ProposedLeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "acquire"]
          - [add_header_code, "x-ms-lease-duration", LeaseDuration]
          - [add_header_code, "x-ms-proposed-lease-id", ProposedLeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-id", LeaseId]

    - RenewLease:
        http_method: Put
        http_status_code: 200
        return_type:
          RenewBlobLeaseResultInternal:
            - BasicResponse: inline
            - BlobLease: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "renew"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-id", LeaseId]

    - ChangeLease:
        http_method: Put
        http_status_code: 200
        return_type:
          ChangeBlobLeaseResultInternal:
            - BasicResponse: inline
            - BlobLease: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string
          - ProposedLeaseId: std::string
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "change"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-proposed-lease-id", ProposedLeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-id", LeaseId]

    - ReleaseLease:
        http_method: Put
        http_status_code: 200
        return_type:
          ReleaseBlobLeaseResultInternal:
            - BasicResponse: inline
            - BlobInfo: inline
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "release"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-sequence-number", SequenceNumber]

    - BreakLease:
        http_method: Put
        http_status_code: 202
        return_type:
          BreakBlobLeaseResultInternal:
            - BasicResponse: inline
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - LeaseTime: int32_t = 0
        options:
          - BasicRequestOptions: inline
          - BreakPeriod: std::chrono::seconds, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_query_code, "comp", "lease"]
          - [add_header_code, "x-ms-lease-action", "break"]
          - [add_header_code, "x-ms-lease-break-period", BreakPeriod]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-lease-time", LeaseTime]


  - BlockBlob:
    - Upload:
        http_method: Put
        http_status_code: 201
        return_type:
          UploadBlockBlobResult:
            - BasicResponse: inline
            - BlobContentInfo: inline
            - TransactionalContentHash: ContentHash, nullable
        options:
          - BodiedRequestOptions: inline
          - TransactionalContentHash: ContentHash, nullable
          - HttpHeaders: BlobHttpHeaders
          - Metadata: Metadata
          - LeaseId: std::string, nullable
          - Tier: AccessTier, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_body_code]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CHECKSUM_HEADER_PACKAGE
          - *REQUEST_MIME_HEADER_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-blob-type", "BlockBlob"]
          - [add_header_code, "x-ms-access-tier", Tier]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - [get_header_code, "x-ms-version-id", VersionId]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - StageBlock:
        http_method: Put
        http_status_code: 201
        return_type:
          StageBlockResult:
            - BasicResponse: inline
            - BlockInfo: inline
        options:
          - BodiedRequestOptions: inline
          - BlockId: std::string
          - TransactionalContentHash: ContentHash, nullable
          - LeaseId: std::string, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
        request_action:
          - [add_body_code]
          - [add_query_code, "comp", "block"]
          - [add_query_code, "blockid", BlockId]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_CHECKSUM_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - StageBlockFromUri:
        http_method: Put
        http_status_code: 201
        return_type:
          StageBlockFromUriResult:
            - BasicResponse: inline
            - BlockInfo: inline
        options:
          - BasicRequestOptions: inline
          - BlockId: std::string
          - SourceUri: std::string
          - SourceRange: Azure::Core::Http::Range, nullable
          - TransactionalContentHash: ContentHash, nullable
          - LeaseId: std::string, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestSourceConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "block"]
          - [add_query_code, "blockid", BlockId]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-copy-source", SourceUri]
          - [add_range_header_code, "x-ms-source_range", SourceRange]
          - *REQUEST_SOURCE_CHECKSUM_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_SOURCE_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - CommitBlockList:
        http_method: Put
        http_status_code: 201
        return_type:
          CommitBlockListResult:
            - BasicResponse: inline
            - BlobContentInfo: inline
            - TransactionalContentHash: ContentHash, nullable
        options:
          - BasicRequestOptions: inline
          - BlockList: std::vector<std::pair<BlockType, std::string>>
          - HttpHeaders: BlobHttpHeaders
          - Metadata: Metadata
          - LeaseId: std::string, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
          - Tier: AccessTier, nullable
          - to_xml: [
            [tag, BlockList, BlockList]
          ]
        request_action:
          - [add_xml_body_code]
          - [add_query_code, "comp", "blocklist"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_MIME_HEADER_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - [add_header_code, "x-ms-access-tier", Tier]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-version-id", VersionId]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - GetBlockList:
        http_method: Get
        http_status_code: 200
        options:
            - BasicRequestOptions: inline
            - ListType: BlockListTypeOption = BlockListTypeOption::Committed
            - LeaseId: std::string, nullable
            - IfTags: std::string, nullable
        return_type:
          GetBlockListResult:
            - BasicResponse: inline
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - ContentType: std::string
            - BlobSize: int64_t = 0
            - CommittedBlocks: std::vector<BlobBlock>
            - UncommittedBlocks: std::vector<BlobBlock>
            - from_xml: [
              [start_tag, BlockList.CommittedBlocks.Block, CommittedBlocks],
              [start_tag, BlockList.UncommittedBlocks.Block, UncommittedBlocks],
            ]
        request_action:
          - [add_query_code, "comp", "blocklist"]
          - [add_query_code, "blocklisttype", ListType]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-if-tags", IfTags]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "Content-Type", ContentType]
          - [get_header_code, "x-ms-blob-content-length", BlobSize]

  - PageBlob:
    - Create:
        http_method: Put
        http_status_code: 201
        return_type:
          CreatePageBlobResult:
            - BasicResponse: inline
            - Created: bool = true
            - BlobContentInfo: inline
            - SequenceNumber: int64_t, nullable
        options:
          - BasicRequestOptions: inline
          - BlobSize: int64_t = -1
          - SequenceNumber: int64_t, nullable
          - HttpHeaders: BlobHttpHeaders
          - Metadata: Metadata
          - LeaseId: std::string, nullable
          - Tier: AccessTier, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_MIME_HEADER_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-blob-type", "PageBlob"]
          - [add_header_code, "x-ms-blob-content-length", BlobSize]
          - [add_header_code, "x-ms-blob-sequence-number", SequenceNumber]
          - [add_header_code, "x-ms-access-tier", Tier]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-version-id", VersionId]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - UploadPages:
        http_method: Put
        http_status_code: 201
        options:
          - BodiedRequestOptions: inline
          - Range: Azure::Core::Http::Range
          - TransactionalContentHash: ContentHash, nullable
          - LeaseId: std::string, nullable
          - IfSequenceNumberLessThanOrEqualTo: int64_t, nullable
          - IfSequenceNumberLessThan: int64_t, nullable
          - IfSequenceNumberEqualTo: int64_t, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        return_type:
          UploadPageBlobPagesResult:
            - BasicResponse: inline
            - PageInfo: inline
        request_action:
          - [add_body_code]
          - [add_query_code, "comp", "page"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_range_header_code, "x-ms-range", Range]
          - *REQUEST_CHECKSUM_HEADER_PACKAGE
          - [add_header_code, "x-ms-page-write", "update"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-if-sequence-number-le", IfSequenceNumberLessThanOrEqualTo]
          - [add_header_code, "x-ms-if-sequence-number-lt", IfSequenceNumberLessThan]
          - [add_header_code, "x-ms-if-sequence-number-eq", IfSequenceNumberEqualTo]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-sequence-number", SequenceNumber]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - UploadPagesFromUri:
        http_method: Put
        http_status_code: 201
        options:
          - BasicRequestOptions: inline
          - SourceUri: std::string
          - SourceRange: Azure::Core::Http::Range
          - Range: Azure::Core::Http::Range
          - TransactionalContentHash: ContentHash, nullable
          - LeaseId: std::string, nullable
          - IfSequenceNumberLessThanOrEqualTo: int64_t, nullable
          - IfSequenceNumberLessThan: int64_t, nullable
          - IfSequenceNumberEqualTo: int64_t, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        return_type:
          UploadPageBlobPagesFromUriResult:
            - BasicResponse: inline
            - PageInfo: inline
        request_action:
          - [add_query_code, "comp", "page"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_range_header_code, "x-ms-range", Range]
          - [add_header_code, "x-ms-copy-source", SourceUri]
          - [add_range_header_code, "x-ms-source-range", SourceRange]
          - *REQUEST_SOURCE_CHECKSUM_HEADER_PACKAGE
          - [add_header_code, "x-ms-page-write", "update"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-if-sequence-number-le", IfSequenceNumberLessThanOrEqualTo]
          - [add_header_code, "x-ms-if-sequence-number-lt", IfSequenceNumberLessThan]
          - [add_header_code, "x-ms-if-sequence-number-eq", IfSequenceNumberEqualTo]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-sequence-number", SequenceNumber]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - ClearPages:
        http_method: Put
        http_status_code: 201
        options:
          - BasicRequestOptions: inline
          - Range: Azure::Core::Http::Range
          - LeaseId: std::string, nullable
          - IfSequenceNumberLessThanOrEqualTo: int64_t, nullable
          - IfSequenceNumberLessThan: int64_t, nullable
          - IfSequenceNumberEqualTo: int64_t, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        return_type:
          ClearPageBlobPagesResult:
            - BasicResponse: inline
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - SequenceNumber: int64_t = 0
        request_action:
          - [add_query_code, "comp", "page"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_range_header_code, "x-ms-range", Range]
          - [add_header_code, "x-ms-page-write", "clear"]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-if-sequence-number-le", IfSequenceNumberLessThanOrEqualTo]
          - [add_header_code, "x-ms-if-sequence-number-lt", IfSequenceNumberLessThan]
          - [add_header_code, "x-ms-if-sequence-number-eq", IfSequenceNumberEqualTo]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-sequence-number", SequenceNumber]

    - Resize:
        http_method: Put
        http_status_code: 200
        return_type:
          ResizePageBlobResult:
            - BasicResponse: inline
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - SequenceNumber: int64_t = 0
        options:
          - BasicRequestOptions: inline
          - BlobSize: int64_t = -1
          - LeaseId: std::string, nullable
          - IfSequenceNumberLessThanOrEqualTo: int64_t, nullable
          - IfSequenceNumberLessThan: int64_t, nullable
          - IfSequenceNumberEqualTo: int64_t, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "properties"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-blob-content-length", BlobSize]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-if-sequence-number-le", IfSequenceNumberLessThanOrEqualTo]
          - [add_header_code, "x-ms-if-sequence-number-lt", IfSequenceNumberLessThan]
          - [add_header_code, "x-ms-if-sequence-number-eq", IfSequenceNumberEqualTo]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-sequence-number", SequenceNumber]

    - GetPageRanges:
        http_method: Get
        http_status_code: 200
        return_type:
          GetPageBlobPageRangesResult:
            - BasicResponse: inline
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - BlobSize: int64_t = 0
            - PageRanges: std::vector<Azure::Core::Http::Range>
            - ClearRanges: std::vector<Azure::Core::Http::Range>
            - from_xml: [
              [start_tag, PageList.PageRange, PageRanges],
              [start_tag, PageList.ClearRange, ClearRanges],
            ]
        options:
          - BasicRequestOptions: inline
          - PreviousSnapshot: std::string, nullable
          - PreviousSnapshotUrl: std::string, nullable
          - Range: Azure::Core::Http::Range, nullable
          - LeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "pagelist"]
          - [add_query_code, "prevsnapshot", PreviousSnapshot]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_range_header_code, "x-ms-range", Range]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-previous-snapshot-url", PreviousSnapshotUrl]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_xml_body_code]
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-content-length", BlobSize]

    - StartCopyIncremental:
        http_method: Put
        http_status_code: 202
        return_type:
          StartCopyPageBlobIncrementalResultInternal:
            - BasicResponse: inline
            - BlobCopyInfo: inline
        options:
          - BasicRequestOptions: inline
          - CopySource: std::string
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "incrementalcopy"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-copy-source", CopySource]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-copy-id", CopyId]
          - [get_header_code, "x-ms-copy-status", CopyStatus]
          - [get_header_code, "x-ms-version-id", VersionId]

  - AppendBlob:
    - Create:
        http_method: Put
        http_status_code: 201
        return_type:
          CreateAppendBlobResult:
            - BasicResponse: inline
            - Created: bool = true
            - BlobContentInfo: inline
        options:
          - BasicRequestOptions: inline
          - HttpHeaders: BlobHttpHeaders
          - Metadata: Metadata
          - LeaseId: std::string, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        request_action:
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_MIME_HEADER_PACKAGE
          - [add_metadata_code, "x-ms-meta-", Metadata]
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-blob-type", "AppendBlob"]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - [get_header_code, "x-ms-version-id", VersionId]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - AppendBlock:
        http_method: Put
        http_status_code: 201
        return_type:
          AppendBlockResult:
            - BasicResponse: inline
            - BlobAppendInfo: inline
        options:
          - BodiedRequestOptions: inline
          - TransactionalContentHash: ContentHash, nullable
          - LeaseId: std::string, nullable
          - MaxSize: int64_t, nullable
          - AppendPosition: int64_t, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_body_code]
          - [add_query_code, "comp", "appendblock"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - *REQUEST_CHECKSUM_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-blob-condition-maxsize", MaxSize]
          - [add_header_code, "x-ms-blob-condition-appendpos", AppendPosition]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-append-offset", AppendOffset]
          - [get_header_code, "x-ms-blob-committed-block-count", CommittedBlockCount]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - AppendBlockFromUri:
        http_method: Put
        http_status_code: 201
        return_type:
          AppendBlockFromUriResult:
            - BasicResponse: inline
            - BlobAppendInfo: inline
        options:
          - BasicRequestOptions: inline
          - SourceUri: std::string
          - SourceRange: Azure::Core::Http::Range, nullable
          - TransactionalContentHash: ContentHash, nullable
          - LeaseId: std::string, nullable
          - MaxSize: int64_t, nullable
          - AppendPosition: int64_t, nullable
          - BlobRequestCustomerProvidedKeyEncryptionOptions: inline
          - BlobRequestEncryptionScopeOptions: inline
          - BlobRequestConditionalHeaders: inline
        request_action:
          - [add_query_code, "comp", "appendblock"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-copy-source", SourceUri]
          - [add_range_header_code, "x-ms-source-range", SourceRange]
          - *REQUEST_SOURCE_CHECKSUM_HEADER_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - [add_header_code, "x-ms-blob-condition-maxsize", MaxSize]
          - [add_header_code, "x-ms-blob-condition-appendpos", AppendPosition]
          - *REQUEST_ENCRYPTION_HEADER_PACKAGE
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE
          - *RESPONSE_CHECKSUM_HEADER_PACKAGE
          - [get_header_code, "x-ms-blob-append-offset", AppendOffset]
          - [get_header_code, "x-ms-blob-committed-block-count", CommittedBlockCount]
          - *RESPONSE_REQUEST_ENCRYPTION_HEADER_PACKAGE

    - Seal:
        http_method: Put
        http_status_code: 200
        return_type:
          SealAppendBlobResult:
            - BasicResponse: inline
            - ETag: Azure::Core::ETag
            - LastModified: Azure::Core::DateTime(RFC1123)
            - IsSealed: bool = true
        options:
          - BasicRequestOptions: inline
          - LeaseId: std::string, nullable
          - BlobRequestConditionalHeaders: inline
          - AppendPosition: int64_t, nullable
        request_action:
          - [add_query_code, "comp", "seal"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "x-ms-lease-id", LeaseId]
          - *REQUEST_CONDITIONAL_HEADER_PACKAGE
          - [add_header_code, "x-ms-blob-condition-appendpos", AppendPosition]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - *RESPONSE_ETAG_LAST_MODIFIED_HEADER_PACKAGE

  - BlobBatch:
    - SubmitBatch:
        http_method: Post
        http_status_code: 202
        return_type:
          SubmitBlobBatchResultInternal:
            - BasicResponse: inline
            - ContentType: std::string
        options:
          - BodiedRequestOptions: inline
          - ContentType: std::string
        request_action:
          - [add_body_code]
          - [add_query_code, "comp", "batch"]
          - *REQUEST_VERSION_TIMEOUT_PACKAGE
          - [add_header_code, "Content-Type", ContentType]
        response_action:
          - *RESPONSE_REQUEST_ID_PACKAGE
          - [get_header_code, "Content-Type", ContentType]


Models:
  HashAlgorithm:
    - external: true
    - type: enum class
    - Md5
    - Crc64
  ContentHash:
    - external: true
    - Value: std::vector<uint8_t>
    - Algorithm: HashAlgorithm
  BasicRequestOptions:
    - noexport: true
    - type: struct
    - Timeout: int32_t, nullable
  BodiedRequestOptions:
    - noexport: true
    - type: struct
    - BasicRequestOptions: inline
  BasicResponse:
    - noexport: true
    - type: struct
    - RequestId: std::string
  BodiedResponse:
    - noexport: true
    - type: struct
    - BasicResponse: inline
    - BodyStream: std::unique_ptr<Azure::Core::Http::BodyStream>
  PublicAccessType:
    - type: enum class
    - BlobContainer: "container"
    - Blob: "blob"
    - None: ""
  BlockType:
    - type: enum class
    - Committed
    - Uncommitted
    - Latest
  BlobType:
    - type: enum class
    - BlockBlob
    - PageBlob
    - AppendBlob
  BlobLeaseState:
    - type: enum class
    - Available: "available"
    - Leased: "leased"
    - Expired: "expired"
    - Breaking: "breaking"
    - Broken: "broken"
  BlobLeaseStatus:
    - type: enum class
    - Locked: "locked"
    - Unlocked: "unlocked"
  BlobLeaseDurationType:
    - type: enum class
    - Infinite: "infinite"
    - Fixed: "fixed"
  AccessTier:
    - type: enum class
    - P1
    - P2
    - P3
    - P4
    - P6
    - P10
    - P15
    - P20
    - P30
    - P40
    - P50
    - P60
    - P70
    - P80
    - Hot
    - Cool
    - Archive
  RehydratePriority:
    - type: enum class
    - High: "High"
    - Standard: "Standard"
  CopyStatus:
    - type: enum class
    - Success: "success"
    - Pending: "pending"
  SkuName:
    - type: enum class
    - StandardLrs: "Standard_LRS"
    - StandardGrs: "Standard_GRS"
    - StandardRagrs: "Standard_RAGRS"
    - StandardZrs: "Standard_ZRS"
    - PremiumLrs: "Premium_LRS"
    - PremiumZrs: "Premium_ZRS"
    - StandardGzrs: "Standard_GZRS"
    - StandardRagzrs: "Standard_RAGZRS"
  AccountKind:
    - type: enum class
    - Storage: "Storage"
    - BlobStorage: "BlobStorage"
    - StorageV2: "StorageV2"
    - FileStorage: "FileStorage"
    - BlockBlobStorage: "BlockBlobStorage"
  EncryptionAlgorithmType:
    - type: enum class
    - Aes256: "AES256"
  BlobBlock:
    - Name: std::string
    - Size: int64_t = 0
    - from_xml: [
      [text, Name, Name],
      [text, Size, Size],
    ]
  BlobAnalyticsLogging:
    - Version: std::string
    - Delete: bool = false
    - Read: bool = false
    - Write: bool = false
    - RetentionPolicy: BlobRetentionPolicy
    - from_xml: [
      [text, Version, Version],
      [text, Delete, Delete],
      [text, Read, Read],
      [text, Write, Write],
      [start_tag, RetentionPolicy, RetentionPolicy],
    ]
    - to_xml: [
      [tag, Version, Version],
      [tag, Delete, Delete],
      [tag, Read, Read],
      [tag, Write, Write],
      [tag, RetentionPolicy, RetentionPolicy],
    ]
  BlobMetrics:
    - Version: std::string
    - IsEnabled: bool = false
    - RetentionPolicy: BlobRetentionPolicy
    - IncludeApis: bool, nullable
    - from_xml: [
      [text, Version, Version],
      [text, Enabled, IsEnabled],
      [text, IncludeAPIs, IncludeApis],
      [start_tag, RetentionPolicy, RetentionPolicy],
    ]
    - to_xml: [
      [tag, Version, Version],
      [tag, Enabled, IsEnabled],
      [tag, IncludeAPIs, IncludeApis],
      [tag, RetentionPolicy, RetentionPolicy],
    ]
  BlobCorsRule:
    - AllowedOrigins: std::string
    - AllowedMethods: std::string
    - AllowedHeaders: std::string
    - ExposedHeaders: std::string
    - MaxAgeInSeconds: int32_t = 0
    - from_xml: [
      [text, AllowedOrigins, AllowedOrigins],
      [text, AllowedMethods, AllowedMethods],
      [text, MaxAgeInSeconds, MaxAgeInSeconds],
      [text, ExposedHeaders, ExposedHeaders],
      [text, AllowedHeaders, AllowedHeaders],
    ]
    - to_xml: [
      [tag, CorsRule.AllowedOrigins, AllowedOrigins],
      [tag, CorsRule.AllowedMethods, AllowedMethods],
      [tag, CorsRule.AllowedHeaders, AllowedHeaders],
      [tag, CorsRule.ExposedHeaders, ExposedHeaders],
      [tag, CorsRule.MaxAgeInSeconds, MaxAgeInSeconds],
    ]
  BlobRetentionPolicy:
    - IsEnabled: bool = false
    - Days: int32_t, nullable
    - from_xml: [
      [text, Enabled, IsEnabled],
      [text, Days, Days],
    ]
    - to_xml: [
      [tag, Enabled, IsEnabled],
      [tag, Days, Days],
    ]
  BlobStaticWebsite:
    - IsEnabled: bool = false
    - IndexDocument: std::string, nullable
    - DefaultIndexDocumentPath: std::string, nullable
    - ErrorDocument404Path: std::string, nullable
    - from_xml: [
      [text, Enabled, IsEnabled],
      [text, IndexDocument, IndexDocument],
      [text, DefaultIndexDocumentPath, DefaultIndexDocumentPath],
      [text, ErrorDocument404Path, ErrorDocument404Path],
    ]
    - to_xml: [
      [tag, Enabled, IsEnabled],
      [tag, IndexDocument, IndexDocument],
      [tag, DefaultIndexDocumentPath, DefaultIndexDocumentPath],
      [tag, ErrorDocument404Path, ErrorDocument404Path],
    ]
  BlobServiceProperties:
    - Logging: BlobAnalyticsLogging
    - HourMetrics: BlobMetrics
    - MinuteMetrics: BlobMetrics
    - Cors: std::vector<BlobCorsRule>
    - DefaultServiceVersion: std::string, nullable
    - DeleteRetentionPolicy: BlobRetentionPolicy
    - StaticWebsite: BlobStaticWebsite
    - from_xml: [
      [start_tag, StorageServiceProperties.Logging, Logging],
      [start_tag, StorageServiceProperties.HourMetrics, HourMetrics],
      [start_tag, StorageServiceProperties.MinuteMetrics, MinuteMetrics],
      [start_tag, StorageServiceProperties.Cors.CorsRule, Cors],
      [text, StorageServiceProperties.DefaultServiceVersion, DefaultServiceVersion],
      [start_tag, StorageServiceProperties.DeleteRetentionPolicy, DeleteRetentionPolicy],
      [start_tag, StorageServiceProperties.StaticWebsite, StaticWebsite],
    ]
    - to_xml: [
      [tag, Logging, Logging],
      [tag, HourMetrics, HourMetrics],
      [tag, MinuteMetrics, MinuteMetrics],
      [tag, Cors, Cors],
      [tag, DefaultServiceVersion, DefaultServiceVersion],
      [tag, DeleteRetentionPolicy, DeleteRetentionPolicy],
      [tag, StaticWebsite, StaticWebsite],
    ]
  BlobRequestConditionalHeaders:
    - noexport: true
    - IfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
    - IfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
    - IfMatch: Azure::Core::ETag
    - IfNoneMatch: Azure::Core::ETag
    - IfTags: std::string, nullable
  BlobRequestSourceConditionalHeaders:
    - noexport: true
    - SourceIfModifiedSince: Azure::Core::DateTime(RFC1123), nullable
    - SourceIfUnmodifiedSince: Azure::Core::DateTime(RFC1123), nullable
    - SourceIfMatch: Azure::Core::ETag
    - SourceIfNoneMatch: Azure::Core::ETag
  BlockInfo:
    - noexport: true
    - TransactionalContentHash: ContentHash, nullable
    - BlobResponseEncryptionOptions: inline
  BlobHttpHeaders:
    - ContentType: std::string
    - ContentEncoding: std::string
    - ContentLanguage: std::string
    - ContentHash: ContentHash
    - CacheControl: std::string
    - ContentDisposition: std::string
  BlobRequestCustomerProvidedKeyEncryptionOptions:
    - noexport: true
    - EncryptionKey: std::string, nullable
    - EncryptionKeySha256: std::vector<uint8_t>, nullable
    - EncryptionAlgorithm: EncryptionAlgorithmType, nullable
  BlobRequestEncryptionScopeOptions:
    - noexport: true
    - EncryptionScope: std::string, nullable
  BlobResponseEncryptionOptions:
    - noexport: true
    - IsServerEncrypted: bool = false
    - EncryptionKeySha256: std::vector<uint8_t>, nullable
    - EncryptionScope: std::string, nullable
  DownloadBlobDetails:
    - type: struct
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - CreatedOn: Azure::Core::DateTime(RFC1123)
    - ExpiresOn: Azure::Core::DateTime(RFC1123), nullable
    - LastAccessedOn: Azure::Core::DateTime(RFC1123), nullable
    - HttpHeaders: BlobHttpHeaders
    - Metadata: Metadata
    - SequenceNumber: int64_t, nullable  # only for page blob
    - CommittedBlockCount: int64_t, nullable  # only for append blob
    - IsSealed: bool, nullable # only for append blob
    - LeaseDuration: BlobLeaseDurationType, nullable
    - LeaseState: BlobLeaseState, nullable
    - LeaseStatus: BlobLeaseStatus, nullable
    - BlobResponseEncryptionOptions: inline
    - ObjectReplicationDestinationPolicyId: std::string, nullable # only valid for replication destination blob
    - ObjectReplicationSourceProperties: std::vector<ObjectReplicationPolicy> # only valid for replication source blob
    - TagCount: int32_t, nullable
    - CopyId: std::string, nullable
    - CopySource: std::string, nullable
    - CopyStatus: CopyStatus, nullable
    - CopyStatusDescription: std::string, nullable
    - CopyProgress: std::string, nullable
    - CopyCompletedOn: Azure::Core::DateTime(RFC1123), nullable
    - VersionId: std::string, nullable
    - IsCurrentVersion: bool, nullable
  BlobContentInfo:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - VersionId: std::string, nullable
    - BlobResponseEncryptionOptions: inline
  BlobContainerItemWithoutName:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - Metadata: Metadata
    - AccessType: PublicAccessType = PublicAccessType::None
    - HasImmutabilityPolicy: bool = false
    - HasLegalHold: bool = false
    - LeaseDuration: BlobLeaseDurationType, nullable
    - LeaseState: BlobLeaseState = BlobLeaseState::Available
    - LeaseStatus: BlobLeaseStatus = BlobLeaseStatus::Unlocked
    - DefaultEncryptionScope: std::string
    - PreventEncryptionScopeOverride: bool = false
  BlobContainerItemDetails:
    - type: struct
    - BlobContainerItemWithoutName: inline
    - RemainingRetentionDays: int32_t, nullable
    - DeletedOn: Azure::Core::DateTime(RFC1123), nullable
  BlobContainerItem:
    - Name: std::string
    - IsDeleted: bool = false
    - VersionId: std::string, nullable
    - Details: BlobContainerItemDetails
    - from_xml: [
      [text, Name, Name],
      [text, Properties.Etag, Details.ETag],
      [text, Properties.Last-Modified, Details.LastModified],
      [text, Properties.PublicAccess, Details.AccessType],
      [text, Properties.HasImmutabilityPolicy, Details.HasImmutabilityPolicy],
      [text, Properties.HasLegalHold, Details.HasLegalHold],
      [text, Properties.LeaseStatus, Details.LeaseStatus],
      [text, Properties.LeaseState, Details.LeaseState],
      [text, Properties.LeaseDuration, Details.LeaseDuration],
      [text, Properties.DefaultEncryptionScope, Details.DefaultEncryptionScope],
      [text, Properties.DenyEncryptionScopeOverride, Details.PreventEncryptionScopeOverride],
      [start_tag, Metadata, Details.Metadata],
      [text, Deleted, IsDeleted],
      [text, Version, VersionId],
      [text, Properties.DeletedTime, Details.DeletedOn],
      [text, Properties.RemainingRetentionDays, Details.RemainingRetentionDays],
    ]
  BlobItemDetails:
    - type: struct
    - HttpHeaders: BlobHttpHeaders
    - Metadata: Metadata
    - CreatedOn: Azure::Core::DateTime(RFC1123)
    - ExpiresOn: Azure::Core::DateTime(RFC1123), nullable
    - LastAccessedOn: Azure::Core::DateTime(RFC1123), nullable
    - LastModified: Azure::Core::DateTime(RFC1123)
    - ETag: Azure::Core::ETag
    - Tier: AccessTier, nullable
    - IsAccessTierInferred: bool, nullable
    - LeaseStatus: BlobLeaseStatus = BlobLeaseStatus::Unlocked
    - LeaseState: BlobLeaseState = BlobLeaseState::Available
    - LeaseDuration: BlobLeaseDurationType, nullable
    - BlobResponseEncryptionOptions: inline
    - SequenceNumber: int64_t, nullable # only for page blobd
    - IsSealed: bool, nullable # only for append blob
    - ObjectReplicationSourceProperties: std::vector<ObjectReplicationPolicy> # only valid for replication source blob
  BlobItem:
    - Name: std::string
    - BlobSize: int64_t = 0
    - BlobType: BlobType
    - IsDeleted: bool = false
    - Snapshot: std::string
    - VersionId: std::string, nullable
    - IsCurrentVersion: bool, nullable
    - Details: BlobItemDetails
    - from_xml: [
      [text, Name, Name],
      [text, Deleted, IsDeleted],
      [text, Snapshot, Snapshot],
      [text, VersionId, VersionId],
      [text, IsCurrentVersion, IsCurrentVersion],
      [text, Properties.Content-Type, Details.HttpHeaders.ContentType],
      [text, Properties.Content-Encoding, Details.HttpHeaders.ContentEncoding],
      [text, Properties.Content-Language, Details.HttpHeaders.ContentLanguage],
      [text, Properties.Content-MD5, Details.HttpHeaders.ContentHash.Value],
      [text, Properties.Cache-Control, Details.HttpHeaders.CacheControl],
      [text, Properties.Content-Disposition, Details.HttpHeaders.ContentDisposition],
      [text, Properties.Creation-Time, Details.CreatedOn],
      [text, Properties.Expiry-Time, Details.ExpiresOn],
      [text, Properties.LastAccessTime, Details.LastAccessedOn],
      [text, Properties.Last-Modified, Details.LastModified],
      [text, Properties.Etag, Details.ETag],
      [text, Properties.Content-Length, BlobSize],
      [text, Properties.BlobType, BlobType],
      [text, Properties.AccessTier, Details.Tier],
      [text, Properties.AccessTierInferred, Details.IsAccessTierInferred],
      [text, Properties.LeaseStatus, Details.LeaseStatus],
      [text, Properties.LeaseState, Details.LeaseState],
      [text, Properties.LeaseDuration, Details.LeaseDuration],
      [text, Properties.ServerEncrypted, Details.IsServerEncrypted],
      [text, Properties.EncryptionKeySHA256, Details.EncryptionKeySha256],
      [text, Properties.Sealed, Details.IsSealed],
      [text, Properties.x-ms-blob-sequence-number, Details.SequenceNumber],
      [start_tag, Metadata, Details.Metadata],
      [start_tag, OrMetadata, Details.ObjectReplicationSourceProperties],
    ]
  ListBlobsIncludeFlags:
    - type: bitwise enum
    - None: ""
    - Copy: "copy"
    - Deleted: "deleted"
    - Metadata: "metadata"
    - Snapshots: "snapshots"
    - Versions: "versions"
    - UncomittedBlobs: "uncommittedblobs"
  BlobContainerInfo:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
  ListBlobContainersIncludeFlags:
    - type: bitwise enum
    - None: ""
    - Metadata: "metadata"
    - Deleted: "deleted"
  BlockListTypeOption:
    - type: enum class
    - Committed: "committed"
    - Uncommitted: "uncommitted"
    - All: "all"
  DeleteSnapshotsOption:
    - type: enum class
    - IncludeSnapshots: "include"
    - OnlySnapshots: "only"
  BlobArchiveStatus:
    - type: enum class
    - RehydratePendingToHot: "rehydrate-pending-to-hot"
    - RehydratePendingToCool: "rehydrate-pending-to-cool"
  ObjectReplicationStatus:
    - type: enum class
    - Complete: "complete"
    - Failed: "failed"
  ObjectReplicationRule:
    - RuleId: std::string
    - ReplicationStatus: ObjectReplicationStatus
  ObjectReplicationPolicy:
    - PolicyId: std::string
    - Rules: std::vector<ObjectReplicationRule>
  BlobProperties:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - CreatedOn: Azure::Core::DateTime(RFC1123)
    - ExpiresOn: Azure::Core::DateTime(RFC1123), nullable
    - LastAccessedOn: Azure::Core::DateTime(RFC1123), nullable
    - Metadata: Metadata
    - BlobType: BlobType
    - LeaseDuration: BlobLeaseDurationType, nullable
    - LeaseState: BlobLeaseState, nullable
    - LeaseStatus: BlobLeaseStatus, nullable
    - BlobSize: int64_t = 0
    - HttpHeaders: BlobHttpHeaders
    - SequenceNumber: int64_t, nullable  # only for page blob
    - CommittedBlockCount: int32_t, nullable  # only for append blob
    - IsSealed: bool, nullable # only for append blob
    - BlobResponseEncryptionOptions: inline
    - Tier: AccessTier, nullable
    - IsAccessTierInferred: bool, nullable
    - ArchiveStatus: BlobArchiveStatus, nullable
    - RehydratePriority: RehydratePriority, nullable
    - AccessTierChangedOn: Azure::Core::DateTime(RFC1123), nullable
    - CopyId: std::string, nullable
    - CopySource: std::string, nullable
    - CopyStatus: CopyStatus, nullable
    - CopyStatusDescription: std::string, nullable
    - IsIncrementalCopy: bool, nullable
    - IncrementalCopyDestinationSnapshot: std::string, nullable
    - CopyProgress: std::string, nullable
    - CopyCompletedOn: Azure::Core::DateTime(RFC1123), nullable
    - ObjectReplicationDestinationPolicyId: std::string, nullable # only valid for replication destination blob
    - ObjectReplicationSourceProperties: std::vector<ObjectReplicationPolicy> # only valid for replication source blob
    - TagCount: int32_t, nullable
    - VersionId: std::string, nullable
    - IsCurrentVersion: bool, nullable
  BlobInfo:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - SequenceNumber: int64_t, nullable
  BlobCopyInfo:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - CopyId: std::string
    - CopyStatus: CopyStatus
    - VersionId: std::string, nullable
  UserDelegationKey:
    - SignedObjectId: std::string
    - SignedTenantId: std::string
    - SignedStartsOn: Azure::Core::DateTime(ISO8601)
    - SignedExpiresOn: Azure::Core::DateTime(ISO8601)
    - SignedService: std::string
    - SignedVersion: std::string
    - Value: std::string
    - from_xml: [
      [text, SignedOid, SignedObjectId],
      [text, SignedTid, SignedTenantId],
      [text, SignedStart, SignedStartsOn],
      [text, SignedExpiry, SignedExpiresOn],
      [text, SignedService, SignedService],
      [text, SignedVersion, SignedVersion],
      [text, Value, Value],
    ]
  PageInfo:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - TransactionalContentHash: ContentHash, nullable
    - SequenceNumber: int64_t = 0
    - BlobResponseEncryptionOptions: inline
  BlobAppendInfo:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - TransactionalContentHash: ContentHash, nullable
    - AppendOffset: int64_t = 0
    - CommittedBlockCount: int64_t = 0
    - BlobResponseEncryptionOptions: inline
  BlobGeoReplicationStatus:
    - type: enum class
    - Live: "live"
    - Bootstrap: "bootstrap"
    - Unavailable: "unavailable"
  BlobGeoReplication:
    - Status: BlobGeoReplicationStatus
    - LastSyncedOn: Azure::Core::DateTime(RFC1123), nullable
    - from_xml: [
      [text, Status, Status],
      [text, LastSyncTime, LastSyncedOn],
    ]
  BlobSignedIdentifier:
    - Id: std::string
    - StartsOn: Azure::Core::DateTime(ISO8601)
    - ExpiresOn: Azure::Core::DateTime(ISO8601)
    - Permissions: std::string
    - from_xml: [
      [text, Id, Id],
      [text, AccessPolicy.Start, StartsOn],
      [text, AccessPolicy.Expiry, ExpiresOn],
      [text, AccessPolicy.Permission, Permissions],
    ]
    - to_xml: [
      [tag, SignedIdentifier.Id, Id],
      [tag, SignedIdentifier.AccessPolicy.Start, StartsOn],
      [tag, SignedIdentifier.AccessPolicy.Expiry, ExpiresOn],
      [tag, SignedIdentifier.AccessPolicy.Permission, Permissions],
    ]
  BlobContainerAccessPolicy:
    - noexport: true
    - AccessType: PublicAccessType = PublicAccessType::None
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - SignedIdentifiers: std::vector<BlobSignedIdentifier>
    - from_xml: [
      [start_tag, SignedIdentifiers.SignedIdentifier, SignedIdentifiers],
    ]
  BlobLease:
    - noexport: true
    - ETag: Azure::Core::ETag
    - LastModified: Azure::Core::DateTime(RFC1123)
    - LeaseId: std::string
  FilterBlobItem:
    - BlobName: std::string
    - BlobContainerName: std::string
    - from_xml: [
      [text, Name, BlobName],
      [text, ContainerName, BlobContainerName],
    ]
  ScheduleBlobExpiryOriginType:
    - type: enum class
    - NeverExpire: "NeverExpire"
    - RelativeToCreation: "RelativeToCreation"
    - RelativeToNow: "RelativeToNow"
    - Absolute: "Absolute"
